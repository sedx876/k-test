{"ast":null,"code":"var _jsxFileName = \"/Users/sharonwatkins/Desktop/Code/kline/client/src/pages/Product.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { getProduct, productStar } from \"../functions/product\";\nimport SingleProduct from \"../components/cards/SingleProduct\";\nimport { useSelector } from \"react-redux\";\nimport { getRelated } from \"../functions/product\";\nimport ProductCard from \"../components/cards/ProductCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Product = _ref => {\n  _s();\n\n  let {\n    match\n  } = _ref;\n  const [product, setProduct] = useState({});\n  const [related, setRelated] = useState([]);\n  const [star, setStar] = useState(0); // redux\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const {\n    slug\n  } = match.params;\n  useEffect(() => {\n    loadSingleProduct();\n  }, [slug]);\n  useEffect(() => {\n    if (product.ratings && user) {\n      let existingRatingObject = product.ratings.find(ele => ele.postedBy.toString() === user._id.toString());\n      existingRatingObject && setStar(existingRatingObject.star); // current user's star\n    }\n  });\n\n  const loadSingleProduct = () => {\n    getProduct(slug).then(res => {\n      setProduct(res.data); // load related\n\n      getRelated(res.data._id).then(res => setRelated(res.data));\n    });\n  };\n\n  const onStarClick = (newRating, name) => {\n    setStar(newRating);\n    console.table(newRating, name);\n    productStar(name, newRating, user.token).then(res => {\n      console.log(\"rating clicked\", res.data);\n      loadSingleProduct(); // if you want to show updated rating in real time\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row pt-4\",\n      children: /*#__PURE__*/_jsxDEV(SingleProduct, {\n        product: product,\n        onStarClick: onStarClick,\n        star: star\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col text-center pt-5 pb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Related Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row pb-5\",\n      children: related.length ? related.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4\",\n        children: /*#__PURE__*/_jsxDEV(ProductCard, {\n          product: r\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this)\n      }, r._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center col\",\n        children: \"No Products Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Product, \"dH36wTtmZRIkjuuxtkcZYdZZ89Q=\", false, function () {\n  return [useSelector];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["/Users/sharonwatkins/Desktop/Code/kline/client/src/pages/Product.js"],"names":["React","useEffect","useState","getProduct","productStar","SingleProduct","useSelector","getRelated","ProductCard","Product","match","product","setProduct","related","setRelated","star","setStar","user","state","slug","params","loadSingleProduct","ratings","existingRatingObject","find","ele","postedBy","toString","_id","then","res","data","onStarClick","newRating","name","console","table","token","log","length","map","r"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { getProduct, productStar } from \"../functions/product\";\nimport SingleProduct from \"../components/cards/SingleProduct\";\nimport { useSelector } from \"react-redux\";\nimport { getRelated } from \"../functions/product\";\nimport ProductCard from \"../components/cards/ProductCard\";\n\nconst Product = ({ match }) => {\n  const [product, setProduct] = useState({});\n  const [related, setRelated] = useState([]);\n  const [star, setStar] = useState(0);\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const { slug } = match.params;\n\n  useEffect(() => {\n    loadSingleProduct();\n  }, [slug]);\n\n  useEffect(() => {\n    if (product.ratings && user) {\n      let existingRatingObject = product.ratings.find(\n        (ele) => ele.postedBy.toString() === user._id.toString()\n      );\n      existingRatingObject && setStar(existingRatingObject.star); // current user's star\n    }\n  });\n\n  const loadSingleProduct = () => {\n    getProduct(slug).then((res) => {\n      setProduct(res.data);\n      // load related\n      getRelated(res.data._id).then((res) => setRelated(res.data));\n    });\n  };\n\n  const onStarClick = (newRating, name) => {\n    setStar(newRating);\n    console.table(newRating, name);\n    productStar(name, newRating, user.token).then((res) => {\n      console.log(\"rating clicked\", res.data);\n      loadSingleProduct(); // if you want to show updated rating in real time\n    });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row pt-4\">\n        <SingleProduct\n          product={product}\n          onStarClick={onStarClick}\n          star={star}\n        />\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col text-center pt-5 pb-5\">\n          <hr />\n          <h4>Related Products</h4>\n          <hr />\n        </div>\n      </div>\n\n      <div className=\"row pb-5\">\n        {related.length ? (\n          related.map((r) => (\n            <div key={r._id} className=\"col-md-4\">\n              <ProductCard product={r} />\n            </div>\n          ))\n        ) : (\n          <div className=\"text-center col\">No Products Found</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Product"]},"metadata":{},"sourceType":"module"}