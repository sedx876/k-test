{"ast":null,"code":"var _jsxFileName = \"/Users/sharonwatkins/Desktop/Code/kline/client/src/pages/admin/sub/SubCreate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategories } from \"../../../functions/category\";\nimport { createSub, getSub, removeSub, getSubs } from \"../../../functions/sub\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SubCreate = () => {\n  _s();\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [category, setCategory] = useState(\"\");\n  const [subs, setSubs] = useState([]); // step 1\n\n  const [keyword, setKeyword] = useState(\"\");\n  useEffect(() => {\n    loadCategories();\n    loadSubs();\n  }, []);\n\n  const loadCategories = () => getCategories().then(c => setCategories(c.data));\n\n  const loadSubs = () => getSubs().then(s => setSubs(s.data));\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.log(name);\n\n    setLoading(true);\n    createSub({\n      name,\n      parent: category\n    }, user.token).then(res => {\n      // console.log(res)\n      setLoading(false);\n      setName(\"\");\n      toast.success(`\"${res.data.name}\" is created`);\n      loadSubs();\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n      if (err.response.status === 400) toast.error(err.response.data);\n    });\n  };\n\n  const handleRemove = async slug => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeSub(slug, user.token).then(res => {\n        setLoading(false);\n        toast.error(`${res.data.name} deleted`);\n        loadSubs();\n      }).catch(err => {\n        if (err.response.status === 400) {\n          setLoading(false);\n          toast.error(err.response.data);\n        }\n      });\n    }\n  }; // step 4\n\n\n  const searched = keyword => c => c.name.toLowerCase().includes(keyword);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(AdminNav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-danger\",\n          children: \"Loading..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Create sub category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Parent category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"category\",\n            className: \"form-control\",\n            onChange: e => setCategory(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Please select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), categories.length > 0 && categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: c._id,\n              children: c.name\n            }, c._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CategoryForm, {\n          handleSubmit: handleSubmit,\n          name: name,\n          setName: setName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LocalSearch, {\n          keyword: keyword,\n          setKeyword: setKeyword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), subs.filter(searched(keyword)).map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-secondary\",\n          children: [s.name, /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => handleRemove(s.slug),\n            className: \"btn btn-sm float-right\",\n            children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n              className: \"text-danger\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/admin/sub/${s.slug}`,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn btn-sm float-right\",\n              children: /*#__PURE__*/_jsxDEV(EditOutlined, {\n                className: \"text-warning\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)]\n        }, s._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SubCreate, \"3mHcHRn0et1wE78okHPzhR2r6y0=\", false, function () {\n  return [useSelector];\n});\n\n_c = SubCreate;\nexport default SubCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubCreate\");","map":{"version":3,"sources":["/Users/sharonwatkins/Desktop/Code/kline/client/src/pages/admin/sub/SubCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","getCategories","createSub","getSub","removeSub","getSubs","Link","EditOutlined","DeleteOutlined","CategoryForm","LocalSearch","SubCreate","user","state","name","setName","loading","setLoading","categories","setCategories","category","setCategory","subs","setSubs","keyword","setKeyword","loadCategories","loadSubs","then","c","data","s","handleSubmit","e","preventDefault","parent","token","res","success","catch","err","console","log","response","status","error","handleRemove","slug","window","confirm","searched","toLowerCase","includes","target","value","length","map","_id","filter"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,kCAArB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,SAA5B,EAAuCC,OAAvC,QAAsD,wBAAtD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,mBAA7C;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAOC,WAAP,MAAwB,uCAAxB;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB,QAAM;AAAEC,IAAAA;AAAF,MAAWZ,WAAW,CAAEa,KAAD,KAAY,EAAE,GAAGA;AAAL,GAAZ,CAAD,CAA5B;AAEA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBnB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACoB,OAAD,EAAUC,UAAV,IAAwBrB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACsB,UAAD,EAAaC,aAAb,IAA8BvB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACwB,QAAD,EAAWC,WAAX,IAA0BzB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC0B,IAAD,EAAOC,OAAP,IAAkB3B,QAAQ,CAAC,EAAD,CAAhC,CAPsB,CAQtB;;AACA,QAAM,CAAC4B,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,CAAC,EAAD,CAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd6B,IAAAA,cAAc;AACdC,IAAAA,QAAQ;AACT,GAHQ,EAGN,EAHM,CAAT;;AAKA,QAAMD,cAAc,GAAG,MACrBzB,aAAa,GAAG2B,IAAhB,CAAsBC,CAAD,IAAOV,aAAa,CAACU,CAAC,CAACC,IAAH,CAAzC,CADF;;AAGA,QAAMH,QAAQ,GAAG,MAAMtB,OAAO,GAAGuB,IAAV,CAAgBG,CAAD,IAAOR,OAAO,CAACQ,CAAC,CAACD,IAAH,CAA7B,CAAvB;;AAEA,QAAME,YAAY,GAAIC,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACC,cAAF,GAD0B,CAE1B;;AACAjB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAf,IAAAA,SAAS,CAAC;AAAEY,MAAAA,IAAF;AAAQqB,MAAAA,MAAM,EAAEf;AAAhB,KAAD,EAA6BR,IAAI,CAACwB,KAAlC,CAAT,CACGR,IADH,CACSS,GAAD,IAAS;AACb;AACApB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAhB,MAAAA,KAAK,CAACuC,OAAN,CAAe,IAAGD,GAAG,CAACP,IAAJ,CAAShB,IAAK,cAAhC;AACAa,MAAAA,QAAQ;AACT,KAPH,EAQGY,KARH,CAQUC,GAAD,IAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAvB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA,UAAIuB,GAAG,CAACG,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC7C,KAAK,CAAC8C,KAAN,CAAYL,GAAG,CAACG,QAAJ,CAAab,IAAzB;AAClC,KAZH;AAaD,GAjBD;;AAmBA,QAAMgB,YAAY,GAAG,MAAOC,IAAP,IAAgB;AACnC;AACA;AACA,QAAIC,MAAM,CAACC,OAAP,CAAe,SAAf,CAAJ,EAA+B;AAC7BhC,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAb,MAAAA,SAAS,CAAC2C,IAAD,EAAOnC,IAAI,CAACwB,KAAZ,CAAT,CACGR,IADH,CACSS,GAAD,IAAS;AACbpB,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAlB,QAAAA,KAAK,CAAC8C,KAAN,CAAa,GAAER,GAAG,CAACP,IAAJ,CAAShB,IAAK,UAA7B;AACAa,QAAAA,QAAQ;AACT,OALH,EAMGY,KANH,CAMUC,GAAD,IAAS;AACd,YAAIA,GAAG,CAACG,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAC/B3B,UAAAA,UAAU,CAAC,KAAD,CAAV;AACAlB,UAAAA,KAAK,CAAC8C,KAAN,CAAYL,GAAG,CAACG,QAAJ,CAAab,IAAzB;AACD;AACF,OAXH;AAYD;AACF,GAlBD,CAxCsB,CA4DtB;;;AACA,QAAMoB,QAAQ,GAAI1B,OAAD,IAAcK,CAAD,IAAOA,CAAC,CAACf,IAAF,CAAOqC,WAAP,GAAqBC,QAArB,CAA8B5B,OAA9B,CAArC;;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA,+BACE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,mBACGR,OAAO,gBACN;AAAI,UAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADM,gBAGN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAOE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,YAAA,IAAI,EAAC,UADP;AAEE,YAAA,SAAS,EAAC,cAFZ;AAGE,YAAA,QAAQ,EAAGiB,CAAD,IAAOZ,WAAW,CAACY,CAAC,CAACoB,MAAF,CAASC,KAAV,CAH9B;AAAA,oCAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,EAMGpC,UAAU,CAACqC,MAAX,GAAoB,CAApB,IACCrC,UAAU,CAACsC,GAAX,CAAgB3B,CAAD,iBACb;AAAoB,cAAA,KAAK,EAAEA,CAAC,CAAC4B,GAA7B;AAAA,wBACG5B,CAAC,CAACf;AADL,eAAae,CAAC,CAAC4B,GAAf;AAAA;AAAA;AAAA;AAAA,oBADF,CAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,eAwBE,QAAC,YAAD;AACE,UAAA,YAAY,EAAEzB,YADhB;AAEE,UAAA,IAAI,EAAElB,IAFR;AAGE,UAAA,OAAO,EAAEC;AAHX;AAAA;AAAA;AAAA;AAAA,gBAxBF,eA+BE,QAAC,WAAD;AAAa,UAAA,OAAO,EAAES,OAAtB;AAA+B,UAAA,UAAU,EAAEC;AAA3C;AAAA;AAAA;AAAA;AAAA,gBA/BF,EAkCGH,IAAI,CAACoC,MAAL,CAAYR,QAAQ,CAAC1B,OAAD,CAApB,EAA+BgC,GAA/B,CAAoCzB,CAAD,iBAClC;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,qBACGA,CAAC,CAACjB,IADL,eAEE;AACE,YAAA,OAAO,EAAE,MAAMgC,YAAY,CAACf,CAAC,CAACgB,IAAH,CAD7B;AAEE,YAAA,SAAS,EAAC,wBAFZ;AAAA,mCAIE,QAAC,cAAD;AAAgB,cAAA,SAAS,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,kBAFF,eAQE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAG,cAAahB,CAAC,CAACgB,IAAK,EAA/B;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,wBAAhB;AAAA,qCACE,QAAC,YAAD;AAAc,gBAAA,SAAS,EAAC;AAAxB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBARF;AAAA,WAA4ChB,CAAC,CAAC0B,GAA9C;AAAA;AAAA;AAAA;AAAA,gBADD,CAlCH;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA4DD,CA3HD;;GAAM9C,S;UACaX,W;;;KADbW,S;AA6HN,eAAeA,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategories } from \"../../../functions/category\";\nimport { createSub, getSub, removeSub, getSubs } from \"../../../functions/sub\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst SubCreate = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [category, setCategory] = useState(\"\");\n  const [subs, setSubs] = useState([]);\n  // step 1\n  const [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n    loadSubs();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n  const loadSubs = () => getSubs().then((s) => setSubs(s.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    createSub({ name, parent: category }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadSubs();\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  const handleRemove = async (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeSub(slug, user.token)\n        .then((res) => {\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n          loadSubs();\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false);\n            toast.error(err.response.data);\n          }\n        });\n    }\n  };\n\n  // step 4\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Create sub category</h4>\n          )}\n\n          <div className=\"form-group\">\n            <label>Parent category</label>\n            <select\n              name=\"category\"\n              className=\"form-control\"\n              onChange={(e) => setCategory(e.target.value)}\n            >\n              <option>Please select</option>\n              {categories.length > 0 &&\n                categories.map((c) => (\n                  <option key={c._id} value={c._id}>\n                    {c.name}\n                  </option>\n                ))}\n            </select>\n          </div>\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          {/* step 2 and step 3 */}\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\n\n          {/* step 5 */}\n          {subs.filter(searched(keyword)).map((s) => (\n            <div className=\"alert alert-secondary\" key={s._id}>\n              {s.name}\n              <span\n                onClick={() => handleRemove(s.slug)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n              <Link to={`/admin/sub/${s.slug}`}>\n                <span className=\"btn btn-sm float-right\">\n                  <EditOutlined className=\"text-warning\" />\n                </span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SubCreate"]},"metadata":{},"sourceType":"module"}